"use strict";(self.webpackChunke_commerce_app=self.webpackChunke_commerce_app||[]).push([[633],{2633:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var r=a(6746),s=a(3172),l=a(7574),i=a(6616),n=a(2404),c=a(3224),o=a(8542),d=a(3905),u=a(9441);const x=async(e,t,a,r,l,i,n)=>{const c="all"===e?"":e;return(await u.A.get(`${s.A}/products`,{params:{cat_id:c,fields:"title,description,price,main_image,stock",limit:9,page:t,search:a,search_field:"title",min_price:r,max_price:l,min_stock:i,max_stock:n}})).data},m=async()=>(await u.A.get(`${s.A}/categories`)).data;var h=a(3090);function g(){const[e,t]=(0,r.useState)(null),[a,s]=(0,r.useState)("all"),[l,i]=(0,r.useState)(null),[n,c]=(0,r.useState)(1),[o,d]=(0,r.useState)(!0),[u,g]=(0,r.useState)(null),[b,f]=(0,r.useState)(""),[w,N]=(0,r.useState)(""),[k,S]=(0,r.useState)(""),[C,P]=(0,r.useState)(""),[_,A]=(0,r.useState)(""),M=(0,r.useRef)(0),z=(0,r.useCallback)((async()=>{d(!0);try{const e=await x(a,n,b,w,k,C,_);M.current=e.pages,i(e.data)}catch(u){g(u),console.error("Error fetching products:",u)}finally{d(!1)}}),[a,n,b,w,k,C,_]),Q=(0,r.useCallback)((async()=>{try{const{data:e}=await m();t(e)}catch(u){console.error("Error fetching categories:",u)}}),[]);(0,r.useEffect)((()=>{Q(),z()}),[Q,z]);return(0,h.jsxs)("div",{className:"my-5 container mx-auto",children:[(0,h.jsx)(j,{clearFilters:()=>{f(""),N(""),S(""),P(""),A("")},searchQuery:b,setSearchQuery:f,loadProducts:z,minPrice:w,setMinPrice:N,maxPrice:k,setMaxPrice:S,minStock:C,setMinStock:P,maxStock:_,setMaxStock:A}),(0,h.jsxs)("div",{className:"flex gap-2",children:[(0,h.jsx)(p,{categories:e,active:a,setActive:s}),o?(0,h.jsx)("div",{children:"Loading..."}):(0,h.jsxs)("div",{className:"lg:w-3/4",children:[(0,h.jsx)(v,{products:l}),M.current&&(0,h.jsx)(y,{currentPage:n,pages:M.current,nextPage:()=>n<M.current&&c((e=>e+1)),previousPage:()=>n>1&&c((e=>e-1))})]})]})]})}const p=(0,r.memo)((e=>{let{categories:t,active:a,setActive:r}=e;return(0,h.jsxs)("div",{className:"lg:w-1/4 shadow bg-white rounded-md",children:[(0,h.jsx)("h2",{className:"my-4 px-4",children:"Categories"}),(0,h.jsxs)("ul",{className:"space-y-1 p-2",children:[(0,h.jsx)("li",{className:`block text-nowrap rounded-lg px-4 py-2 text-sm font-medium cursor-pointer hover:bg-gray-100  hover:text-gray-700 ${"all"===a&&"bg-gray-100 text-gray-700"}`,onClick:()=>r("all"),children:"All"}),t?t.map((e=>(0,h.jsx)("li",{onClick:()=>r(e._id),className:`block text-nowrap rounded-lg px-4 py-2 text-sm font-medium cursor-pointer hover:bg-gray-100  hover:text-gray-700 ${a===e._id&&"bg-gray-100 text-gray-700"}`,children:e.title},e._id))):(0,h.jsx)(h.Fragment,{children:"loading..."})]})]})})),v=e=>{let{products:t}=e;return(0,h.jsx)("div",{className:"flex flex-wrap justify-center",children:null===t||void 0===t?void 0:t.map((e=>(0,h.jsx)(l.N_,{to:"/",className:"group relative block overflow-hidden w-1/3",children:(0,h.jsxs)("div",{className:"px-3 mb-2",children:[(0,h.jsxs)("button",{className:"absolute end-4 top-4 z-10 rounded-full bg-white p-1.5 text-gray-900 transition hover:text-gray-900/75",children:[(0,h.jsx)("span",{className:"sr-only",children:"Wishlist"}),(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"size-4",children:(0,h.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})})]}),(0,h.jsx)("img",{src:`${s.W}${e.main_image}`,alt:"",className:"h-64 w-full object-cover transition duration-500 group-hover:scale-105 sm:h-72"}),(0,h.jsxs)("div",{className:"relative border border-gray-100 bg-white p-6",children:[(0,h.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:e.title}),(0,h.jsx)("p",{className:"mt-1.5 text-sm text-gray-700",children:e.description}),(0,h.jsxs)("p",{className:"mt-1.5 text-sm text-gray-700",children:["$",!isNaN(Number(e.price))&&e.price]}),(0,h.jsx)("form",{className:"mt-4",children:(0,h.jsx)("button",{className:"block w-full rounded bg-yellow-400 p-4 text-sm font-medium transition hover:scale-105",children:"Add to Cart"})})]})]})},e._id)))})},y=e=>{let{currentPage:t,pages:a,nextPage:r,previousPage:s}=e;return(0,h.jsx)("div",{className:"w-100 flex justify-center",children:(0,h.jsxs)("div",{className:"inline-flex items-center justify-center gap-3",children:[(0,h.jsxs)("button",{onClick:s,className:"inline-flex size-8 items-center justify-center rounded border border-gray-100 bg-white text-gray-900 rtl:rotate-180",children:[(0,h.jsx)("span",{className:"sr-only",children:"Prev Page"}),(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-3",viewBox:"0 0 20 20",fill:"currentColor",children:(0,h.jsx)("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),(0,h.jsxs)("p",{className:"text-xs text-gray-900",children:[t,(0,h.jsx)("span",{className:"mx-0.25",children:"/"}),a]}),(0,h.jsxs)("button",{onClick:r,className:"inline-flex size-8 items-center justify-center rounded border border-gray-100 bg-white text-gray-900 rtl:rotate-180",children:[(0,h.jsx)("span",{className:"sr-only",children:"Next Page"}),(0,h.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"size-3",viewBox:"0 0 20 20",fill:"currentColor",children:(0,h.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})},j=e=>{let{searchQuery:t,setSearchQuery:a,filterSubmit:r,clearFilters:s,minPrice:l,setMinPrice:o,maxPrice:d,setMaxPrice:u,minStock:x,setMinStock:m,maxStock:g,setMaxStock:p}=e;return(0,h.jsxs)(i.A,{onSubmit:r,component:"form",direction:"row",gap:1,alignItems:"center",className:"mb-10 p-2 rounded-md border border-1 border-gray-300",children:[(0,h.jsx)(b,{searchQuery:t,setSearchQuery:a}),(0,h.jsx)(n.A,{label:"Min Price",variant:"outlined",type:"number",value:l,onChange:e=>o(e.target.value),sx:{minWidth:120}}),(0,h.jsx)(n.A,{label:"Max Price",variant:"outlined",type:"number",value:d,onChange:e=>u(e.target.value),sx:{minWidth:120}}),(0,h.jsx)(n.A,{label:"Min Stock",variant:"outlined",type:"number",value:x,onChange:e=>m(e.target.value),sx:{minWidth:120}}),(0,h.jsx)(n.A,{label:"Max Stock",variant:"outlined",type:"number",value:g,onChange:e=>p(e.target.value),sx:{minWidth:120}}),(0,h.jsx)(c.A,{type:"button",variant:"outlined",color:"secondary",onClick:s,children:"Clear"})]})},b=e=>{let{searchQuery:t,setSearchQuery:a}=e;return(0,h.jsx)(o.A,{sx:{p:"2px 4px",display:"flex",alignItems:"center",width:200,height:55},children:(0,h.jsx)(d.Ay,{sx:{ml:1,flex:1},value:t,onChange:e=>a(e.target.value),placeholder:"Search...",inputProps:{"aria-label":"search google maps"}})})}}}]);
//# sourceMappingURL=633.3adf11bf.chunk.js.map